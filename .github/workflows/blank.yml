name: Upload APK to Breez API

on:
  workflow_dispatch: # Manual trigger
  push:
    branches: [ main ]

jobs:
  upload-apk:
    runs-on: ubuntu-latest
    timeout-minutes: 20 # Extra time for large file

    steps:
      - name: Download APK from Release
        run: |
          curl -LO "https://github.com/gnt133/Sample/releases/download/v1.0.0/uat-30-July.apk"
          ls -lh # Verify file size (~291MB)

      - name: Upload to Breez API
        uses: docker://curlimages/curl:latest
        with:
          args: >
            -X POST "https://sertfy.tqdemo.in/api/test-automation-via-cicd"
            -F "Usernameofbreez=satyam.rai@tesquirel.com"
            -F "Passwordofbreez=tsq@1203"
            -F "BatchscheduleID=BS00147"
            -F "File=@./uat-30-July.apk"
